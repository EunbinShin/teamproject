<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="mybatis.mapper.productmanages">
	<select id="selectAll"
			resultType="productmanage">
		select
			product_id,
			product_name,
			product_category,
			percentage_discount,
			product_price,
			selling_price
			product_desc,
			available_quantity,
			post_date,
			thumbnail,
			thumbnailhover,
			best,
			main_img,
			sub1_img,
			sub2_img,
			sub3_img			
		from products
	</select>
	
	<select id="selectseqval" resultType="int">
		select pid_seq.currval from dual
	</select>
	
	<insert id="insert" parameterType="productmanage">
		insert into products
		(product_id,product_name,product_category,percentage_discount,product_price,selling_price,product_desc,available_quantity,post_date,best,thumbnail,thumbnailhover,main_img,sub1_img,sub2_img,sub3_img)
		values
		(pid_seq.nextval,#{product_name},#{product_category},#{percentage_discount},#{product_price},#{selling_price},#{product_desc},#{available_quantity},#{post_date},#{best},#{thumbnail},#{thumbnailhover},#{main_img},#{sub1_img, jdbcType=VARCHAR},#{sub2_img, jdbcType=VARCHAR},#{sub3_img, jdbcType=VARCHAR}) 
	</insert>
	
	<select id="selectByPk" parameterType="string" resultType="productmanage">
		select product_id
		from products
		where product_id = #{product_id}
	</select>
	
	<select id="selectAllInfo"
			parameterType="string"
			resultType="productmanage">
		select
			product_id,
			product_name,
			product_category,
			product_price,
			product_desc,
			percentage_discount,
			available_quantity,
			post_date,
			thumbnail,
			best,
			main_img,
			sub1_img,
			sub2_img,
			sub3_img,
			thumbnailhover,
			old_product_id,
			selling_price
		from products
		where product_id = #{product_id}
	</select>
	
	<update id="edit" parameterType ="productmanage">
		update products
		set product_id = #{product_id},
			product_name = #{product_name},
			product_category = #{product_category},
			product_price = #{product_price},
			product_desc = #{product_desc},
			percentage_discount = #{percentage_discount},
			available_quantity = #{available_quantity},
			post_date = #{post_date},
			<if test="thumbnail != null">
				thumbnail = #{thumbnail},
			</if>
			best = #{best},
			<if test="main_img != null">
				main_img = #{main_img},
			</if>
			<if test="sub1_img != null">
				sub1_img = #{sub1_img},
			</if>
			<if test="sub2_img != null">
				sub2_img = #{sub2_img},
			</if>
			<if test="sub3_img != null">
				sub3_img = #{sub3_img},
			</if>
			<if test="thumbnailhover != null">
				thumbnailhover = #{thumbnailhover},
			</if>
			old_product_id = #{old_product_id}
		where product_id = #{old_product_id}
	</update>
	
	<delete id="delete">
		delete from products
		where product_id = #{product_id}
	</delete>
	

</mapper>